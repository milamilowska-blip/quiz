<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DRM ‚Äì Eksperyment Fa≈Çszywych Wspomnie≈Ñ</title>
    
    <style>
        /* G≈Ç√≥wne style */
        body { 
            font-family: Arial, sans-serif; 
            text-align: center; 
            padding: 20px; 
            max-width: 800px;
            margin: 0 auto;
        }
        h1 { color: #2c3e50; }
        button { 
            padding: 12px 25px; 
            margin: 10px; 
            font-size: 16px;
            cursor: pointer;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        button#restartButton {
            background-color: #2ecc71; /* Zielony kolor dla restartu */
        }
        button#restartButton:hover {
            background-color: #27ae60;
        }
        button:hover:not(:disabled) { background-color: #2980b9; }
        button:disabled { background-color: #bdc3c7; cursor: not-allowed; }
        #results {
            margin-top: 30px;
            font-size: 18px;
            font-weight: bold;
            padding: 15px;
            border-radius: 5px;
        }
        
        /* Style dla ekranu Nauki (Ekran 1) */
        #learning-phase {
            padding: 20px;
            border: 2px solid #3498db;
            margin-bottom: 20px;
        }
        #list { 
            font-size: 28px; 
            margin: 20px 0; 
            color: darkblue; 
            min-height: 50px; 
            font-weight: bold;
        }

        /* Style dla ekranu Testu (Ekran 2) */
        #recall-phase {
            padding: 20px;
            border: 2px solid #e74c3c;
            display: none; /* Domy≈õlnie ukryty */
        }
        #recall-input {
            width: 90%;
            height: 100px;
            padding: 10px;
            margin: 15px 0;
            font-size: 16px;
            box-sizing: border-box;
            resize: vertical;
        }

        /* Stopka */
        footer {
            margin-top: 50px;
            padding-top: 10px;
            border-top: 1px solid #ccc;
            font-size: 14px;
            color: #777;
        }
    </style>
</head>
<body>
    <h1>Eksperyment DRM</h1>
    
    <div id="learning-phase">
        <p>Zapamiƒôtaj s≈Çowa, kt√≥re zobaczysz poni≈ºej, a nastƒôpnie przejd≈∫ do testu.</p>
        <div id="list">--- Naci≈õnij START, aby rozpoczƒÖƒá ---</div>
        
        <button id="startButton">Start (Poka≈º s≈Çowa)</button>
        <button id="goToTestButton" disabled>Przejd≈∫ do testu</button>
    </div>

    <div id="recall-phase">
        <h2>Test Przypominania</h2>
        <p>Wpisz poni≈ºej **tylko** s≈Çowa, kt√≥re pamiƒôtasz, oddzielajƒÖc je przecinkami (np. s≈Çowo1, s≈Çowo2, s≈Çowo3).</p>
        <textarea id="recall-input" placeholder="Wpisz zapamiƒôtane s≈Çowa..."></textarea>
        <br>
        <button id="submitTestButton">Sprawd≈∫ wyniki</button>
    </div>
    
    <div id="results"></div>

    <footer>
        K.Kara≈Ñska WSB 2025
    </footer>

    <script>
        // Dane eksperymentu
        const words = ["≈Ç√≥≈ºko", "noc", "poduszka", "drzemka", "marzenie", "zmƒôczenie", "zasnƒÖƒá", "ko≈Çdra", "budzik", "odpoczynek", "sypialnia", "koszmar", "relaks"];
        const lure = "sen"; // Critical Lure
        let shown = false;

        // Pobieranie element√≥w DOM
        const listDiv = document.getElementById("list");
        const resultsDiv = document.getElementById("results");
        const learningPhase = document.getElementById("learning-phase");
        const recallPhase = document.getElementById("recall-phase");
        const startButton = document.getElementById("startButton");
        const goToTestButton = document.getElementById("goToTestButton");
        const recallInput = document.getElementById("recall-input");
        const submitTestButton = document.getElementById("submitTestButton");

        // --- FUNKCJE NAWIGACJI ---

        // Funkcja resetujƒÖca stan eksperymentu
        function restartExperiment() {
            shown = false;
            listDiv.innerHTML = "--- Naci≈õnij START, aby rozpoczƒÖƒá ---";
            resultsDiv.innerHTML = "";
            recallInput.value = "";
            
            // Przywr√≥cenie widoczno≈õci i stan√≥w przycisk√≥w
            learningPhase.style.display = 'block';
            recallPhase.style.display = 'none';
            startButton.disabled = false;
            goToTestButton.disabled = true;
            submitTestButton.disabled = false;
        }

        // 1. Poka≈º listƒô s≈Ç√≥w
        function showList() {
            listDiv.innerHTML = words.join(", ");
            shown = true;
            resultsDiv.innerHTML = "Lista pokazana. Zapamiƒôtaj. Nastƒôpnie przejd≈∫ do testu.";
            startButton.disabled = true;
            goToTestButton.disabled = false;
        }
        
        // 2. Prze≈ÇƒÖcz na ekran testu i ukryj listƒô
        function goToTest() {
            if (!shown) return alert("Najpierw naci≈õnij START!");
            
            learningPhase.style.display = 'none'; // Ukrywamy ekran nauki
            recallPhase.style.display = 'block'; // Pokazujemy ekran testu
            resultsDiv.innerHTML = ''; // Czy≈õcimy komunikat
            recallInput.focus(); // Ustawienie kursora w polu tekstowym
        }

        // 3. Sprawdzenie wynik√≥w
        function submitTest() {
            let recall = recallInput.value;
            
            if (recall.trim() === "") {
                resultsDiv.innerHTML = "Nie wpisano ≈ºadnych s≈Ç√≥w. Wpisz je i spr√≥buj ponownie.";
                return;
            }
            
            // Przetwarzanie odpowiedzi
            let arr = recall.toLowerCase().split(',')
                                        .map(item => item.trim())
                                        .filter(item => item.length > 0);
            
            let lureFound = arr.includes(lure);
            let correctRecalled = 0;
            
            // Liczenie poprawnie przypomnianych s≈Ç√≥w
            arr.forEach(item => {
                if (words.includes(item)) {
                    correctRecalled++;
                }
            });

            // Wy≈õwietlenie wynik√≥w
            let resultMessage;
            
            if (lureFound) {
                 // Czerwony komunikat: b≈ÇƒÖd pamiƒôci (fa≈Çszywe wspomnienie)
                resultsDiv.style.backgroundColor = '#f7dbd9';
                resultsDiv.style.color = '#e74c3c';
                resultMessage = "üö® **FA≈ÅSZYWE WSPOMNIENIE!** Wpisa≈Çe≈õ s≈Çowo 'sen', kt√≥rego **NIE BY≈ÅO** na li≈õcie.";
            } else {
                 // Zielony komunikat: sukces eksperymentalny (brak fa≈Çszywego wspomnienia)
                resultsDiv.style.backgroundColor = '#daf2da';
                resultsDiv.style.color = '#27ae60';
                resultMessage = "‚úÖ **SUKCES!** Nie wpisa≈Çe≈õ s≈Çowa 'sen'. Twoja pamiƒôƒá uniknƒô≈Ça pu≈Çapki DRM.";
            }
            
            resultsDiv.innerHTML =
                `<h2>Tw√≥j Wynik</h2>` +
                `Poprawnie zapamiƒôtane s≈Çowa: **${correctRecalled} / ${words.length}**<br>` +
                `S≈Ç√≥w og√≥≈Çem (poprawne + fa≈Çszywe): **${arr.length}**<br><br>` +
                resultMessage +
                `<br><button id="restartButton">Zacznij od nowa</button>`;
                
            submitTestButton.disabled = true; // Test przeprowadzony
            
            // Podpiƒôcie funkcji restartu do nowo utworzonego przycisku
            document.getElementById("restartButton").addEventListener('click', restartExperiment);
        }

        // --- PODPIƒòCIE ZDARZE≈É ---
        startButton.addEventListener('click', showList);
        goToTestButton.addEventListener('click', goToTest);
        submitTestButton.addEventListener('click', submitTest);
        
        // Zapewnienie, ≈ºe przyciski sƒÖ poczƒÖtkowo poprawnie ukryte
        window.onload = restartExperiment;
    </script>
</body>
</html>
